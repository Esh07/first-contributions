name: Auto-merge PRs
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  auto-merge:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Check if PR only modifies CONTRIBUTORS.md
        id: check_files
        run: |
          FILES_CHANGED=$(git diff --name-only HEAD HEAD~1)
          if [[ "$FILES_CHANGED" == "CONTRIBUTORS.md" ]]; then
            echo "::set-output name=only_contributors::true"
          else
            echo "::set-output name=only_contributors::false"
          fi
